<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <title>My Unity Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    html, body { margin:0; padding:0; width:100%; height:100%; background:#000; overflow:hidden; }
    #unity-canvas { display:block; width:100%; height:100%; }
    #unity-warning { color:white; font-family:Arial, sans-serif; text-align:center; margin-top:10vh; }
    #unity-loading-bar { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); width:50%; height:20px; background:#555; }
    #unity-progress-bar-full { width:0%; height:100%; background:#0f0; }
  </style>

  <!-- Block mobile devices -->
  <script>
    if (/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent)) {
      document.addEventListener("DOMContentLoaded", () => {
        document.body.innerHTML = "<div id='unity-warning'>‚ùå This game only works on desktop. Please open on a computer.</div>";
      });
      throw new Error("Mobile not supported");
    }
  </script>
</head>
<body>
  <canvas id="unity-canvas"></canvas>
  <div id="unity-loading-bar">
    <div id="unity-progress-bar-full"></div>
  </div>
  <div id="unity-warning"></div>

  <!-- Load Unity loader -->
  <script src="Build/mygame.loader.js"></script>
  <script>
    // ===== EDIT THESE =====
    const RELEASE_BASE = "https://github.com/Baldhawk92/bh-pf/releases/download/v1.0.0"; // Your release base URL
    const DATA_FILE = "https://github.com/Baldhawk92/bh-pf/releases/download/v1.0.0/mygame.data";   // Name of your .data file
    const WASM_FILE = "https://github.com/Baldhawk92/bh-pf/releases/download/v1.0.0/mygame.wasm";   // Name of your .wasm file if hosted on Release
    const FRAMEWORK_FILE = "Build/mygame.framework.js"; // Usually kept local

    const canvas = document.getElementById("unity-canvas");
    const loadingBar = document.getElementById("unity-loading-bar");
    const progressBar = document.getElementById("unity-progress-bar-full");
    const warningDiv = document.getElementById("unity-warning");

    function showBanner(msg, type) {
      const div = document.createElement("div");
      div.innerHTML = msg;
      div.style.background = type==='error' ? 'red' : (type==='warning' ? 'yellow' : 'transparent');
      div.style.padding = "10px";
      warningDiv.appendChild(div);
    }

    createUnityInstance(canvas, {
      dataUrl: `${RELEASE_BASE}/${DATA_FILE}`,
      frameworkUrl: FRAMEWORK_FILE,
      codeUrl: `${RELEASE_BASE}/${WASM_FILE}`,
      streamingAssetsUrl: "StreamingAssets",
      companyName: "DefaultCompany",
      productName: "My Game",
      productVersion: "1.0",
      showBanner: showBanner
    }).then(unityInstance => {
      loadingBar.style.display = "none";
      // Resize canvas automatically when window resizes
      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      window.addEventListener("resize", resizeCanvas);
      resizeCanvas();
      // Optional fullscreen button
      document.body.addEventListener("dblclick", () => unityInstance.SetFullscreen(1));
    }).catch(err => {
      alert(err);
      console.error(err);
    }).then(null, err => console.error(err)); // Catch double promise rejection
  </script>
</body>
</html>
